/**
 *
 * @package    local_mb2builder
 * @copyright  2018 - 2025 Mariusz Boloz (lmsstyle.com)
 * @license    PHP and HTML: http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later. Other parts: http://themeforest.net/licenses
*/ jQuery(document).ready(function(t){var a=t(document),e=function(){t(".mb2-pb-import-select select").each(function(a){t(this).on("change",function(){var a=t(this).val();t(this).closest(".mb2-pb-tabs-pane").find(".block-item").each(function(){""===a||a===t(this).attr("data-category")?t(this).show():t(this).hide()})})})},i=function(){t(mb2pb_Selectors().layout.section).each(function(){t(this).find(mb2pb_Selectors().layout.row).length||t(this).find(mb2pb_Selectors().layout.container_rows).html(c().startButtonsHtml())})},n=function(){var a=function(){return["announcements","blog","courses","categories","events","mycourses","reviews","teachers"]},e=function(){for(var e=a(),n=0;n<e.length;n++)t('.mb2-pb-container [data-id="'+e[n]+'"]').each(function(){i(t(this))})},i=function(e){var i=t.inArray(e.attr("data-id"),a()),n=e.find(".videowebiframe"),r=e.find(mb2pb_Selectors().layout.carousel);if(-1==i)return null;var s=mb2pb_Helper().dataAttribs(e);s=jQuery.param(s);var o=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/"+e.attr("data-id")+".php?"+s+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t.ajax({url:o,type:"get",dataType:"html",beforeSend:function(){e.find(".mb2-pb-actions-loading").fadeIn(150)},error:function(t,a,e){},success:function(t){e.find(".mb2-pb-content-list").html(t),n.length&&n.attr("src",t),r.length&&(d().carouselDestroy(r.attr("id")),d().carouselInit(r.attr("id"))),setTimeout(function(){e.find(".mb2-pb-actions-loading").fadeOut(150)},350)}})},n=function(a){var e=mb2pb_Helper().uniqId(),i=0;a.attr("id","theme-accordion-"+e),a.find(mb2pb_Selectors().elements.accordion_item).each(function(){i++,t(this).find("[data-parent]").attr("data-parent","#theme-accordion-"+e),t(this).find('[data-toggle="collapse"]').attr("data-target","#accordion-item-"+e+i),t(this).find('[data-toggle="collapse"]').attr("aria-controls","accordion-item-"+e+i),t(this).find(".collapse").attr("id","accordion-item-"+e+i)})},s=function(a,e){var i=mb2pb_Helper().uniqId(),n=0;e?a.find(".nav-link").each(function(){n++;var a=t(this).attr("aria-controls");t(this).attr("href","#tab-"+i+n),t(this).attr("aria-controls","tab-"+i+n);var e=t(this).closest(".mb2-pb-tabs").find('[id="'+a+'"]');e.attr("id","tab-"+i+n),e.attr("aria-labelledby","tab-"+i+n)}):(a.find(".nav-link").attr("href","#tab-"+i),a.find(".nav-link").attr("aria-controls","tab-"+i),a.find(".tab-pane").attr("id","tab-"+i),a.find(".tab-pane").attr("aria-labelledby","tab-"+i))},l=function(a,e){a.closest(".mb2-pb-tabs").find(".nav-link").removeClass("active"),a.closest(".mb2-pb-tabs").find(".tab-pane").removeClass("active"),e.addClass("active"),t('[id="'+e.attr("aria-controls")+'"]').addClass("active")},c=function(t,a){var e=mb2pb_Helper().uniqId(),i=t.closest(".mb2-pb-subelement").find(".nav-link"),n=a.find(".nav-link"),r=i.closest(".mb2-pb-tabs").find('[id="'+i.attr("aria-controls")+'"]').clone();n.attr("href","#tab-"+e),n.attr("aria-controls","tab-"+e),r.attr("id","tab-"+e),r.attr("aria-labelledby","tab-"+e),i.closest(".mb2-pb-tabs").find(".tab-content").append(r),l(i,n)},m=function(t){var a=t.find(mb2pb_Selectors().elements.animnum_item_number),e=t.closest(mb2pb_Selectors().elements.animnum).attr("data-aspeed");e=Number(e),t.prop("Counter",0).stop().animate({Counter:t.attr("data-number")},{duration:e,easing:"swing",step:function(t){a.text(this.Counter.toFixed())}})},u=function(t){var a=t.closest(mb2pb_Selectors().layout.element).find("[data-collapse]");a.attr("aria-expanded","false"),a.addClass("collapsed"),t.closest(mb2pb_Selectors().layout.element).find(".collapse").removeClass("show"),t.find("[data-collapse]").attr("aria-expanded","true"),t.find("[data-collapse]").removeClass("collapsed"),t.find(".collapse").addClass("show")},p=function(a){var e=a.find(mb2pb_Selectors().layout.carousel);e.length&&e.each(function(){d().carouselPrepare(a),d().carouselInit(t(this).attr("id"))});var i=a.find(mb2pb_Selectors().elements.accordion),l=a.hasClass("mb2-pb-accordion")?a:i;(i.length||a.hasClass("mb2-pb-accordion"))&&l.each(function(){n(t(this))});var c=a.find(mb2pb_Selectors().elements.tabs),m=a.hasClass("mb2-pb-tabs")?a:c;(c.length||a.hasClass("mb2-pb-tabs"))&&m.each(function(){s(t(this),!0)});var u=a.find(".parallax1"),p=a.hasClass("parallax1")?a:u;(u.length||a.hasClass("parallax1"))&&p.each(function(){o().parallaxDestroy(t(this)),t(this).css("background-image","url('"+t(this).attr("data-bgimage")+"')"),o().parallaxInit(t(this))});var b=a.find(mb2pb_Selectors().elements.heading+" .typed"),f=a.hasClass("mb2-pb-heading")?a:a.find(mb2pb_Selectors().elements.heading);(b.length||a.hasClass("mb2-pb-heading")&&a.find(".typed").length)&&f.each(function(){var a=t(this).find(".heading");r().typedPrepare(t(this)),r().beforeTypedInit(a.attr("id")),r().typedInit(a.attr("id"))})};return{loadItems:i,accordionPrepare:n,tabsPrepare:s,animnumInit:function(a,e){var a=a||t(mb2pb_Selectors().elements.animnum);a.find(mb2pb_Selectors().elements.animnum_item).each(function(){var a=t(this),i=!0;e?m(a):a.bind("inview",function(t,e){e&&i&&(i=!1,setTimeout(function(){m(a)},350))})})},accordionParent:function(t,a){var e=a.attr("id"),i=a.find('[data-toggle="collapse"]'),n=a.find(".collapse");1==t.val()?(i.attr("data-parent","#"+e),n.attr("data-parent","#"+e)):(i.attr("data-parent",""),n.attr("data-parent",""))},accordionFirstItem:function(t,a){var e=a.find(mb2pb_Selectors().elements.accordion_item).first();1==t.val()?u(e):(a.find(".collapse").removeClass("show"),a.find("[data-collapse]").attr("aria-expanded","false"),a.find("[data-collapse]").addClass("collapsed"))},tabsActivateItem:l,accordionActivateItem:u,tabsDuplicateItem:c,runElements:p,initDynamicElements:e}},r=function(){var a=function(t){var a=t.closest(mb2pb_Selectors().layout.element);return{strings:a.attr("data-typedtext").split("|"),typeSpeed:Number(a.attr("data-typespeed")),backSpeed:Number(a.attr("data-backspeed")),backDelay:Number(a.attr("data-backdelay")),loop:!0}};return{typedInit:function(e){e?new Typed("#"+e+" .typed",a(t("#"+e))):t(".typed").each(function(){var e=t(this).closest(".heading").attr("id");new Typed("#"+e+" .typed",a(t("#"+e)))})},typedDestroy:function(a){var e=t("#"+a).find(".headingtext"),i=e.closest(mb2pb_Selectors().layout.element);e.html(i.attr("data-content"))},beforeTypedInit:function(a){var e=t("#"+a).find(".headingtext"),i=e.closest(mb2pb_Selectors().layout.element);if(i.attr("data-content").includes("type")){for(var n=i.attr("data-content").split(" "),r=0;r<n.length;r++)"type"===n[r]&&(n[r]='<span class="typed"></span>');e.html(n.join(" "))}else e.html(i.attr("data-content")+' <span class="typed"></span>')},typedPrepare:function(t){var a=mb2pb_Helper().uniqId();t.find(".heading").attr("id","typedid_"+a)}}},s=function(){var e=function(t){var a=t.closest(".accimg-nav").find(".accimg-item");if(t.hasClass("show"))return null;a.removeClass("show"),t.addClass("show"),a.find(".accimg-content").slideUp(250),n(t)},i=function(t){t.removeClass("show"),t.find(".accimg-content").slideUp(250)},n=function(a){a?r(a):t(".accimg-item.show").each(function(){r(t(this))})},r=function(t){var a=t.closest(".mb2-pb-subelement").attr("data-image");t.find(".accimg-image-src").attr("src",a),t.closest(".mb2-pb-element").find(".accimg-img-preview").find("img").attr("src",a),t.find(".accimg-content").slideDown(250)};return{init:function(){n(!1),a.on("click",".accimg-btn",function(){var a=t(this).closest(".accimg-item");a.hasClass("show")?i(a):e(a)})},itemAttrs:r,accItemOpen:e}},o=function(){return{parallaxInit:function(a){a?a.jarallax():t(mb2pb_Selectors().layout.row+".parallax1").each(function(){t(this).jarallax()})},parallaxDestroy:function(t){t.jarallax("destroy")}}},l=function(){var a=function(){var a=JSON.stringify(mb2pb_LayoutData().setData(!1));t(mb2pb_Selectors().builder.demofield).val(a)};return{saveDemo:function(){var e=t(mb2pb_Selectors().builder.demoform),i=e.attr("data-url");a(),t.ajax({type:"POST",url:i,data:e.serialize(),beforeSend:function(){},error:function(t,a,e){},success:function(t){}})},setDemoContent:a}},d=function(){var a,e,i=function(a){a?(t("#"+a).find(".swiper-notification").remove(),new Swiper("#"+a,n(t("#"+a)))):t(mb2pb_Selectors().builder.buildercontainer+" "+mb2pb_Selectors().layout.carousel).each(function(){new Swiper("#"+t(this).attr("id"),n(t(this)))}),t(mb2pb_Selectors().builder.buildercontainer+" "+mb2pb_Selectors().layout.carousel).each(function(){t(this).find(".heroimg1").length&&t(this).closest(mb2pb_Selectors().layout.element).addClass("heroimg1")})},n=function(t){var a,e=t,i=t.closest(mb2pb_Selectors().elements.coursetabs),n=t.closest(mb2pb_Selectors().layout.element);if(i.length&&(e=i),n.length&&(e=n),2==e.attr("data-clayout"))return{grabCursor:!0,effect:"creative",breakpoints:{0:{creativeEffect:{prev:{translate:["-35%",0,-500],opacity:.5},next:{translate:["35%",0,-500],opacity:.5}}},577:{creativeEffect:{prev:{translate:["-40%",0,-500],opacity:.5},next:{translate:["40%",0,-500],opacity:.5}}},1101:{creativeEffect:{prev:{translate:["-80%",0,-500],opacity:.5},next:{translate:["80%",0,-500],opacity:.5}}}},navigation:{nextEl:".swiper-nextjs_"+(a=t).attr("id"),prevEl:".swiper-prevjs_"+a.attr("id")},pagination:{el:".swiper-pagination",clickable:!0}};var r=Number(e.attr("data-columns")),s=1==e.attr("data-mobcolumns"),o=1==e.attr("data-sloop"),l=1==e.attr("data-autoplay"),d=Number(e.attr("data-pausetime")),c=Number(e.attr("data-animtime")),m=e.attr("data-animtype"),u=e.hasClass("mb2-pb-announcements")?"vertical":"horizontal",p=!0,b=30;"thin"===e.attr("data-gutter")?b=10:"none"===e.attr("data-gutter")&&(b=0),e.hasClass("mb2-pb-announcements")&&(b=0,p=!1);var f=s?2:1,h=r>3?3:r,v=d;return o&&l||(v=36e5),{slidesPerView:r,spaceBetween:b,allowTouchMove:p,autoHeight:!0,loop:o,direction:u,speed:c,effect:m,shortSwipes:!1,navigation:{nextEl:".swiper-nextjs_"+t.attr("id"),prevEl:".swiper-prevjs_"+t.attr("id")},pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:v,disableOnInteraction:!1},breakpoints:{0:{slidesPerView:f},480:{slidesPerView:f},600:{slidesPerView:s?h:r>2?2:r},768:{slidesPerView:h},1e3:{slidesPerView:r>5?5:r}},watchSlidesProgress:!0}},r=function(t){new Swiper("#"+t).destroy(),s(t)},s=function(a){var e=t("#"+a).find(".swiper-wrapper"),i=e.clone(),n=i.find(".mb2-pb-carousel-item");i.find(".swiper-slide-duplicate").remove(),i.removeAttr("id"),i.removeAttr("class"),i.removeAttr("style"),i.removeAttr("aria-live"),n.removeAttr("class"),n.removeAttr("style"),n.removeAttr("role"),n.removeAttr("data-swiper-slide-index"),n.removeAttr("aria-label"),l(i,a),i.addClass("swiper-wrapper"),i.addClass("mb2-pb-content-list"),n.addClass("mb2-pb-carousel-item"),n.addClass("theme-slider-item"),n.addClass("swiper-slide"),e.closest(mb2pb_Selectors().layout.element).hasClass("mb2-pb-testimonials")&&n.addClass("mb2-pb-testimonials-item"),t("#"+a).empty(),t("#"+a).append(u(a)),t("#"+a).append(i),t("#"+a).append(p())},o=function(t,a){t.find(".theme-carousel-nav").remove(),t.prepend(u(a))},l=function(a,e){var i=a.find(".slide-contentnav button");i.length&&i.each(function(){var a=t(this);a.removeAttr("id"),a.removeAttr("tabindex"),a.removeAttr("aria-controls"),a.removeAttr("aria-disabled"),a.removeClass("swiper-button-disabled"),a.hasClass("slide-contentnav-next")&&a.addClass("swiper-nextjs_"+e),a.hasClass("slide-contentnav-prev")&&a.addClass("swiper-prevjs_"+e)})},d=function(a){var e=a.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carousel),n=[],s=0;r(e.attr("id"));var o=e.find(mb2pb_Selectors().layout.carouselwrapper);for(a.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carouselsubelementitem).each(function(){n[s]=t(this).attr("data-pbid"),s++}),x=0;x<n.length;x++){var l=o.find(mb2pb_Selectors().layout.carouselitem+'[data-pbid="'+n[x]+'"]');o.append(l)}i(e.attr("id"))},m=function(t,a){var e=mb2pb_Helper().uniqId(),n=t.closest(mb2pb_Selectors().layout.subelement),s=t.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carousel);r(s.attr("id"));var o=s.find(mb2pb_Selectors().layout.carouselwrapper),l=t.closest(mb2pb_Selectors().layout.element).find('.mb2-pb-carousel-item[data-pbid="'+n.attr("data-pbid")+'"]').clone();a.attr("data-pbid",e),l.attr("data-pbid",e),o.append(l),i(s.attr("id"))},u=function(t){var a="";return a+='<div class="theme-carousel-nav">',a+='<button type="button" class="swiper-button-nav swiper-button-prev swiper-prevjs_'+t+' themereset"></button>',a+='<button type="button" class="swiper-button-nav swiper-button-next swiper-nextjs_'+t+' themereset"></button>',a+="</div>"},p=function(){var t="";return t+='<div class="theme-carousel-pagenavnav">',t+='<div class="swiper-pagination"></div>',t+="</div>"};return{carouselInit:i,carouselDestroy:r,carouselSortItems:d,carouselPrepare:function(a){var e=mb2pb_Helper().uniqId(),i=0,n=0,r=[],s=a.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carousel);s.attr("id","swiper_prepare_"+e),a.find(mb2pb_Selectors().layout.carouselitem).each(function(){r[++i]=e+i,t(this).attr("data-pbid",e+i)});var d=a.find(mb2pb_Selectors().layout.subelement);d.length&&d.each(function(){n++,t(this).attr("data-pbid",r[n])}),o(s,"swiper_prepare_"+e),l(s,"swiper_prepare_"+e)},columnsToCarousel:function(t){var a=mb2pb_Helper().uniqId(),e=t.find(".mb2-pb-content-list");e.removeClass("theme-boxes"),e.removeClass("theme-col-"+t.attr("data-columns")),e.removeClass("gutter-"+t.attr("data-gutter")),t.find(".mb2-pb-content-inner").addClass("swiper"),e.addClass("swiper-wrapper"),e.find(">div").addClass("swiper-slide"),t.find(".mb2-pb-content-inner").attr("id","swiper_"+a),t.find(".theme-carousel-nav").remove(),t.find(".mb2-pb-content-inner").prepend(u("swiper_"+a)),c().setLayoutSetting(t,e)},carouselToColumns:function(t,a){a.attr("data-"+t.attr("data-attrname"),t.val()),a.find(".mb2-pb-content-inner").removeClass("swiper");var e=a.find(".mb2-pb-content-list");e.removeClass("swiper-wrapper"),e.find(">div").removeClass("swiper-slide"),e.addClass("theme-boxes"),e.addClass("theme-col-"+a.attr("data-columns")),e.addClass("gutter-"+a.attr("data-gutter")),e.find(">div").addClass("theme-box"),c().setLayoutSetting(a,e)},coursesPrepare:function(t){var a=mb2pb_Helper().uniqId();t.closest(mb2pb_Selectors().layout.element).find(".mb2-pb-element-inner").attr("id","swiper_prepare_"+a)},carouselDuplicateItem:m,carouselRowClass:function(){t(mb2pb_Selectors().layout.row).each(function(a){t(this).removeClass("isslider"),t(this).attr("data-isslider",0),0==a&&t(this).find(".pbmainslider-wrap").length&&(t(this).addClass("isslider"),t(this).attr("data-isslider",1))})}}},c=function(){var a=function(a){var e=t(".mb2-pb-sortable-"+a+"s");e.sortable({axis:"element"!==a&&"subelement"!==a&&("column"===a?"x":"y"),placeholder:"ui-state-highlight",forcePlaceholderSize:!0,handle:"."+a+"-drag-handle",connectWith:"column"!==a&&"subelement"!==a&&"tab"!==a&&".mb2-pb-sortable-"+a+"s",opacity:.95,start:function(a,i){var n=t(i.item).outerHeight(!0),r=t(i.item).outerWidth(!0);e.find(">.ui-state-highlight").addClass(t(i.item).attr("class")),e.find(">.ui-state-highlight").css("height",n),e.find(">.ui-state-highlight").css("width",r)},stop:function(t,a){if(a.item.hasClass("mb2-pb-carousel_item")&&d().carouselSortItems(a.item),a.item.hasClass("mb2-pb-carousel")){var e=a.item.find(mb2pb_Selectors().layout.carousel);d().carouselDestroy(e.attr("id")),d().carouselInit(e.attr("id"))}d().carouselRowClass(),l().saveDemo()}})},e=function(t){var a=0,e="",i=[{name:"mobcenter",prefix:"mobcenter"},{name:"align",prefix:"align-"},{name:"scheme",prefix:""},{name:"custom_class",prefix:""}];for(a=0;a<i.length;a++)void 0!==t&&(e+=" "+i[a].prefix+t[i[a].name]);return e},i=function(t){var a="";if("object"==typeof t){for(let[e,i]of Object.entries(t))"col"!==e&&(a+=i?" data-"+e+'="'+i+'"':"");return a}},r=function(t){var a="";if("object"==typeof t){for(let[e,i]of(a+=' style="',Object.entries(t)))("bgimage"===e||"height"===e)&&i&&(a+="bgimage"===e?"background-image:url('"+i+"');":"",a+="height"===e?"min-height:"+i+"px;":"");return a+'"'}},s=function(a){var n="",s=!1,o=[12],l=[],d=[],c=[],m=[],u=[],p=0,b=0,f="";12!==a&&(o=a.split(","));var h=t(mb2pb_Selectors().layout.row+"-active");for((s=h.length)&&h.find(mb2pb_Selectors().layout.pbcolumn).each(function(a,e){l[a]=t(this).find(mb2pb_Selectors().layout.elementcontainer).html(),d[a]=mb2pb_Helper().dataAttribs(t(this)),c[a]=t(this).attr("style"),m[a]=t(this).find(mb2pb_Selectors().layout.column_inner).attr("style"),u[a]=t(this).find(mb2pb_Selectors().layout.column_inner+"-bg").attr("style")}),b=0;b<o.length;b++){if(n+='<div class="mb2-pb-column col-md-'+o[b]+e(d[b])+'" data-col="'+o[b]+'"'+i(d[b])+r(d[b])+">",n+='<div class="column-helper"></div>',n+='<div class="mb2-pb-actions">',n+="<span>"+langspan.data("col")+"</span>",n+='<span href="#" class="column-drag-handle" title="'+langspan.data("move")+'">',n+='<i class="fa fa-arrows"></i> ',n+="</span>",n+='<a href="#" class="settings-column" title="'+langspan.data("settings")+'" data-modal="#mb2-pb-modal-settings-column">',n+='<i class="fa fa-pencil"></i> ',n+="</a>",n+='<a href="#" class="mb2-pb-add-element" title="'+langspan.data("addelement")+'" data-modal="#mb2-pb-modal-elements">',n+='<i class="fa fa-plus"></i> ',n+="</a>",n+="</div>",n+='<div class="column-inner" style="'+(f=m[b]?m[b]:"padding-bottom:30px")+'">',n+='<div class="mb2-pb-sortable-elements clearfix">',s&&b==o.length-1){if(l.length>b)for(p=b;p<l.length;p++)n+=l[p]}else l[b]&&(n+=l[b]);n+="</div>",n+="</div>",n+='<div class="mb2-pb-column-footer">',n+='<a href="#" class="mb2-pb-add-element" title="'+langspan.data("addelement")+'" data-modal="#mb2-pb-modal-elements">&plus; '+langspan.data("addelement")+"</a>",n+="</div>",n+='<div class="column-inner-bg" style="'+u[b]+'"></div>',n+="</div>"}return n},o=function(t,a){a.removeClass("layout1"),a.removeClass("layout2"),a.removeClass("layout3"),a.addClass("layout"+t.attr("data-layout"))},c=function(){t(mb2pb_Selectors().layout.row).each(function(){t("body").hasClass("builderpart")&&t(this).attr("data-ispart",1)})};return{layoutInit:function(){a("section"),a("row"),a("column"),a("element"),a("subelement"),a("tab"),d().carouselRowClass(),c()},elementHtml:function(a,e,i){var r=t(".mb2-pb-template-"+a).clone();r.removeClass("mb2-pb-template-"+a),r.attr("data-id",a),"accordion"===a&&n().accordionPrepare(r),"tabs"===a&&n().tabsPrepare(r,!1),("carousel"===a||"pbmainslider"===a||"testimonials"===a||"announcements"===a)&&d().carouselPrepare(r),("courses"===a||"categories"===a)&&d().coursesPrepare(r),"animnum"===a&&n().animnumInit(r,!0);var e=r.find(mb2pb_Selectors().layout.subelement);return e.length&&e.attr("data-id",i),r},deactivateSections:function(){t(mb2pb_Selectors().layout.section).removeClass("mb2-pb-section-active"),t(mb2pb_Selectors().layout.row).removeClass("mb2-pb-row-active"),t(mb2pb_Selectors().layout.pbcolumn).removeClass("mb2-pb-column-active"),t(mb2pb_Selectors().layout.element).removeClass("mb2-pb-element-active"),t(mb2pb_Selectors().layout.subelement).removeClass("mb2-pb-subelement-active"),t(mb2pb_Selectors().builder.modalsettings).removeClass("mb2-pb-modal-wider"),t(mb2pb_Selectors().builder.collapsedgroup).removeClass("open")},rowHtml:function(a){var e=t(mb2pb_Selectors().layout.templaterow).clone();e.removeClass("mb2-pb-template-row");var i=s(a);return e.find(mb2pb_Selectors().layout.sortable_columns).append(i),e},buildRowColumns:s,currentColumns:function(a){var e=["12"];return a.closest(mb2pb_Selectors().layout.row).find(mb2pb_Selectors().layout.pbcolumn).each(function(a){e[a]=t(this).attr("data-col")}),e.join(",")},rowCurrentClass:function(a,e){e.each(function(){a===t(this).attr("data-row_variant")&&t(this).addClass("current-layout")})},columnsToList:function(t,a){a.attr("data-"+t.attr("data-attrname"),t.val());var e=a.find(".mb2-pb-content-list");e.removeClass("theme-boxes"),e.removeClass("theme-col-"+a.attr("data-columns")),e.removeClass("gutter-"+a.attr("data-gutter")),e.find(">div").removeClass("theme-box"),o(a,e)},startButtonsHtml:function(){var t="";return t+='<div class="mb2-pb-startbuttons">',t+='<button type="button" class="mb2-pb-row-toggle" data-modal="#mb2-pb-modal-row-layout">Add new row</button>',t+='<button type="button" class="mb2-pb-importexportbtn startbutton" data-modal="#mb2-pb-modal-import-export">Add prebuilt layout</button>',t+="</div>"},setLayoutSetting:o}},m=function(){var a=function(a){a||(a=e());var i=t(".mb2-pb-active-editor").siblings(mb2pb_Selectors().builder.editor_document);i.empty(),i.append(r(a)),""===i.html()&&i.html(e())},e=function(){return"<p><br></p>"},i=function(a,e,i,r){var s=a.closest(mb2pb_Selectors().settings.form_group).find(".mb2-pb-editor-document-active"),o=e;e.hasClass("mb2-pb-tabs_item")&&(e=e.closest(".mb2-pb-tabs")),i&&(s=a),a.attr("data-selector")&&(o=e.find(a.attr("data-selector"))),r?s.on("input",function(){i?(o.html(mb2pb_Helper().replaceText(t(this).val())),e.attr("data-"+a.attr("data-attrname"),t(this).val())):(o.html(n()),e.attr("data-"+a.attr("data-attrname"),n()))}):o.html(n())},n=function(){var a=t(".mb2-pb-active-editor").siblings(mb2pb_Selectors().builder.editor_document).clone();a.find('[id^="yui"]').each(function(){t(this).removeAttr("id")}),a.find('*[class=""]').each(function(){t(this).removeAttr("class")});var e=a.html();return"<p></p>"===(e=mb2pb_Helper().replaceText(e))||"<p><br></p>"===e?"":e},r=function(t){return s(t,[{regex:/<style[^>]*>[\s\S]*?<\/style>/gi,replace:""},{regex:/<!--(?![\s\S]*?-->)/gi,replace:""},{regex:/<\/?(?:title|meta|style|st\d|head|font|html|body|link)[^>]*?>/gi,replace:""}])},s=function(t,a){var e=0;for(e=0;e<a.length;e++)t=t.replace(a[e].regex,a[e].replace);return t},o=function(){t(mb2pb_Selectors().builder.editor_active).siblings(mb2pb_Selectors().builder.editor_document).focus()},l=function(e){var r=e.closest(".form-group"),s=r.find(mb2pb_Selectors().builder.editor_input),o=t(mb2pb_Selectors().layout.element+"-active");t(mb2pb_Selectors().layout.subelement+"-active").length&&(o=t(mb2pb_Selectors().layout.subelement+"-active")),s.hasClass("editing")?(a(s.val()),s.removeClass("editing"),r.removeClass("source"),i(s,o,!1,!0)):(s.val(""),s.addClass("editing"),r.addClass("source"),textarea_value=n(),s.val(textarea_value),i(s,o,!0,!0))},d=function(){t('input[name="mb2_pb_input_link_url"]').val(""),t('input[name="mb2_pb_editor_link_target"]').checked=!1,t(mb2pb_Selectors().builder.editor_document).find("a").removeClass("active")},c=function(t,a,e){o();var i=current_selection_range;e.length?(e.attr("href",t),a.prop("checked")?e.attr("target","_blank"):e.removeAttr("target")):(link=document.createElement("a"),i.collapsed?link.appendChild(document.createTextNode(t)):link.appendChild(document.createTextNode(i.toString())),link.setAttribute("href",t),a.prop("checked")?link.setAttribute("target","_blank"):link.removeAttribute("target"),i.deleteContents(),i.insertNode(link))};return{initEditor:function(t,e,n){document.queryCommandSupported("DefaultParagraphSeparator")&&document.execCommand("DefaultParagraphSeparator",!1,"p"),a(t),i(e,n,!1,!0)},updateFromTextareaBeforeSave:function(){var e=t(".mb2-pb-active-editor").siblings(mb2pb_Selectors().builder.editor_document).closest(".form-group").find(".mb2-pb-editor-input");e.hasClass("editing")&&a(e.val())},getCleanHtml:n,buttonActions:function(t){o();var a=t,e=a.data("action"),i=!1,n=null;a.data("show-default-ui")&&(i=a.data("show-default-ui")),a.data("value-args")&&(n=a.data("value-args")),document.execCommand(e,i,n)},formatBlock:function(t){t.val()&&document.execCommand("formatBlock",!1,"<"+t.val()+">")},toggleMode:l,toggleHelper:function(t){var a=t.closest(mb2pb_Selectors().builder.editor_active).find(mb2pb_Selectors().builder.editor_helper);t.hasClass("mbp-pb-editor-helper-link")?(a.find(".element-image").hide(),a.find(".element-link").slideToggle(250)):(a.find(".element-link").hide(),a.find(".element-image").slideToggle(250))},setLinkForm:function(t){var a=t.closest(mb2pb_Selectors().builder.editor_active).find(mb2pb_Selectors().builder.editor_helper);current_selection_range=(current_selection=window.getSelection()).getRangeAt(0);var e=t.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("a.active");e.length&&(a.find('input[name="mb2_pb_input_link_url"]').val(e.attr("href")),"_blank"===e.attr("target")&&(a.find('input[name="mb2_pb_editor_link_target"]').checked=!0))},linkSave:function(t){var a=t.closest(mb2pb_Selectors().builder.editor_helper+"-element"),e=a.find('input[name="mb2_pb_input_link_url"]').val(),i=a.find('input[name="mb2_pb_editor_link_target"]'),n=t.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("a.active");t.closest(mb2pb_Selectors().builder.editor_helper+"-element").slideUp(250),e&&(c(e,i,n),d())},linkCancel:function(t){t.closest(mb2pb_Selectors().builder.editor_helper+"-element").slideUp(250),d()},imageSave:function(a){o();var e=a.closest(mb2pb_Selectors().builder.editor_helper+"-element"),n=e.find('input[name="mb2_pb_input_image_url"]'),r=n.val();if(a.closest(mb2pb_Selectors().builder.editor_helper+"-element").slideUp(250),r){var s=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("img.active");0==s.length&&document.execCommand("insertimage",!1,r);var l=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find('img[src="'+r+'"]');if(s.length)var l=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("img.active");var d=e.find('input[name="mb2_pb_editor_image_width"]'),c=e.find('input[name="mb2_pb_editor_image_desc"]'),m=e.find('select[name="mb2_pb_editor_image_align"]');n.val()&&l.attr("src",n.val()),d.val()&&l.attr("width",d.val()),c.val()&&l.attr("alt",c.val()),m.val()&&l.attr("class",m.val()),a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("img").removeClass("active"),a.closest(mb2pb_Selectors().builder.editor_helper).find(mb2pb_Selectors().settings.image_preview).hide(),t(mb2pb_Selectors().builder.editor_helper+"-element").find("input").val(""),t(mb2pb_Selectors().builder.editor_helper+"-element").find("select").val("img-align-none");var u=t(mb2pb_Selectors().layout.element+"-active");0==u.length&&(u=t(mb2pb_Selectors().layout.subelement+"-active"));var p=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_input);i(p,u,!1,!1)}},imageActive:function(a){t(mb2pb_Selectors().builder.editor_document).find("img").removeClass("active");var e=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_helper),i=a,n=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_helper+"-element"),r=n.find(mb2pb_Selectors().settings.image_preview);r.show(),r.attr("src",i.attr("src"));var s=n.find('input[name="mb2_pb_input_image_url"]'),o=n.find('input[name="mb2_pb_editor_image_width"]'),l=n.find('input[name="mb2_pb_editor_image_desc"]'),d=n.find('select[name="mb2_pb_editor_image_align"]');s.val(i.attr("src")),o.val(i.attr("width")),l.val(i.attr("alt")),d.val(i.attr("class")),a.addClass("active"),e.find(".element-image").slideDown(250)},imageRemove:function(a){o();var e=a.closest(mb2pb_Selectors().builder.editor_helper+"-element"),n=e.find('input[name="mb2_pb_input_image_url"]').val();a.closest(mb2pb_Selectors().builder.editor_helper+"-element").slideUp(250),a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find('img[src="'+n+'"]').remove(),a.closest(mb2pb_Selectors().builder.editor_helper).find(mb2pb_Selectors().settings.image_preview).hide(),e.find("input").val(""),e.find("select").val("img-align-none");var r=t(mb2pb_Selectors().layout.element+"-active");0==r.length&&(r=t(mb2pb_Selectors().layout.subelement+"-active"));var s=a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_input);i(s,r,!1,!1)},imageCancel:function(a){t(mb2pb_Selectors().builder.editor_helper+"-element").find("input").val(""),t(mb2pb_Selectors().builder.editor_helper+"-element").find("select").val("img-align-none"),a.closest(mb2pb_Selectors().builder.editor_helper).find(mb2pb_Selectors().settings.image_preview).hide(),a.closest(mb2pb_Selectors().builder.editor_helper).find(".element-image").slideUp(250),a.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().builder.editor_document).find("img").removeClass("active")}}},u=function(){var a=function(a,e,i){var n="",r="";a&&(n=a.toRgbString());var s=i;e.attr("data-parent")&&(s=i.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+i.attr("data-pbid")+'"]'));var o=s;if(e.attr("data-selector")&&(o=s.find(e.attr("data-selector"))),e.attr("data-selector2")&&(r=s.find(e.attr("data-selector2"))),e.attr("data-colorclass")&&n?o.addClass("color1"):o.removeClass("color1"),e.attr("data-globalparent"))i.find(".mb2-pb-subelement").each(function(){t(this).attr("data-"+e.attr("data-attrname"))||t(this).find(e.attr("data-selector")).css(e.attr("data-style_properity"),n)});else if(e.attr("data-globalchild")&&!n){var l=i.closest(".mb2-pb-element");o.css(e.attr("data-style_properity"),l.attr("data-"+e.attr("data-attrname")))}else i.attr("data-"+e.attr("data-attrname"),n),e.attr("data-cssvariable")?o.css(e.attr("data-cssvariable"),n):o.css(e.attr("data-style_properity"),n),i.hasClass("mb2-pb-row")&&"bgcolor"===e.attr("data-attrname")&&(i.find(".hero-img-grad.grad-left").attr("style","background-image:linear-gradient(to right,"+n+",rgba(255,255,255,0));"),i.find(".hero-img-grad.grad-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+n+");")),s.hasClass("mb2-pb-carousel-item")&&"ocolor"===e.attr("data-attrname")&&(s.find(".slidehero-img-grad.grad-left").attr("style","background-image:linear-gradient(to right,"+n+",rgba(255,255,255,0));"),s.find(".slidehero-img-grad.grad-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+n+");")),i.hasClass("mb2-pb-boxesimg_item")&&"color"===e.attr("data-attrname")&&(i.find(".theme-boximg-imgel .gradient-left").attr("style","background-image:linear-gradient(to right,"+n+",rgba(255,255,255,0));"),i.find(".theme-boximg-imgel .gradient-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+n+");")),i.hasClass("mb2-pb-row")&&"gradcolor1"===e.attr("data-attrname")&&i.find(".rowgrad").attr("style","background-image:linear-gradient("+i.attr("data-graddeg")+"deg,"+n+" "+i.attr("data-gradloc1")+"%,"+i.attr("data-gradcolor2")+" "+i.attr("data-gradloc2")+"%)"),i.hasClass("mb2-pb-row")&&"gradcolor2"===e.attr("data-attrname")&&i.find(".rowgrad").attr("style","background-image:linear-gradient("+i.attr("data-graddeg")+"deg,"+i.attr("data-gradcolor1")+" "+i.attr("data-gradloc1")+"%,"+n+" "+i.attr("data-gradloc2")+"%)"),e.attr("data-style_properity2")&&o.css(e.attr("data-style_properity2"),n),e.attr("data-selector2")&&r.css(e.attr("data-style_properity"),n)},e=function(a,e){var i=e.find(mb2pb_Selectors().layout.carousel),n=e;a.attr("data-selector")&&(n=e.find(a.attr("data-selector"))),i.length?(i.each(function(){d().carouselDestroy(t(this).attr("id"))}),e.attr("data-"+a.attr("data-attrname"),a.val()),a.attr("data-ignorecarousel")&&(a.attr("data-class_remove")&&n.removeClass(a.attr("data-class_remove")),n.addClass(a.attr("data-class_prefix")+a.val())),i.each(function(){d().carouselInit(t(this).attr("id"))})):(a.attr("data-class_remove")&&n.removeClass(a.attr("data-class_remove")),n.addClass(a.attr("data-class_prefix")+a.val())),e.attr("data-"+a.attr("data-attrname"),a.val())},i=function(t,a){var e=a.find(".mb2-pb-content-inner");a.attr("data-"+t.attr("data-attrname"),t.val()),1==t.val()?(d().columnsToCarousel(a),d().carouselInit(e.attr("id"))):(d().carouselDestroy(e.attr("id")),d().carouselToColumns(t,a))},s=function(t,a,e){if(t.attr("data-class_remove")&&(e.removeClass(t.attr("data-class_remove")),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).removeClass(t.attr("data-class_remove")),t.attr("data-parent")&&t.attr("data-parentcls")&&a.closest(".mb2-pb-element").removeClass(t.attr("data-class_remove"))),a.attr("data-"+t.attr("data-attrname"),t.val()),e.addClass(t.attr("data-class_prefix")+t.val()),t.attr("data-parent")&&t.attr("data-parentcls")&&a.closest(".mb2-pb-element").addClass(t.attr("data-class_prefix")+t.val()),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).addClass(t.attr("data-class_prefix")+t.val()),a.hasClass("mb2-pb-list")&&"style"===t.attr("data-attrname")){var i=a.find("ol");"number"===t.val()&&(e.replaceWith('<ol class="'+e.attr("class")+'" style="'+e.attr("style")+'">'+e.html()+"</ol>"),c().layoutInit()),"number"!==t.val()&&i.length&&(i.replaceWith('<ul class="'+i.attr("class")+'" style="'+i.attr("style")+'">'+i.html()+"</ul>"),c().layoutInit())}},l=function(t,a){var e=a.find(".heading");a.attr("data-"+t.attr("data-attrname"),t.val()),1==t.val()?(r().beforeTypedInit(e.attr("id")),r().typedInit(e.attr("id"))):r().typedDestroy(e.attr("id"))};return{actionStyle:function(a,e){var i="change",n="px",r=!1,s=e;a.attr("data-parent")&&(s=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var o=s;a.attr("data-changemode")&&(i=a.attr("data-changemode")),a.attr("data-style_suffix")&&"rem"===(n=a.attr("data-style_suffix"))&&(r=!0),"none"===n&&(n=""),a.attr("data-selector")&&(o=s.find(a.attr("data-selector"))),"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on(i,function(){var a=t(this).attr("data-style_properity");"heroml"===t(this).attr("data-attrname")&&(a=e.attr("data-herohpos")),o.css(a,t(this).val()+n),t(this).attr("data-style_properity2")&&o.css(t(this).attr("data-style_properity2"),t(this).val()+n),t(this).attr("data-numclass")&&mb2pb_Helper().classFromnum(t(this),o,r),e.attr("data-"+t(this).attr("data-attrname"),t(this).val()),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})},actionColor:function(t,e){t.focus(),t.spectrum({showInput:!0,showButtons:!1,preferredFormat:"rgb",allowEmpty:!0,color:"",showAlpha:!0,change:function(i){a(i,t,e)},move:function(i){a(i,t,e)}})},actionClass:function(a,i){var n="change";a.attr("data-changemode")&&(n=a.attr("data-changemode")),"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on(n,function(){var n=i;t(this).attr("data-parent")&&(n=i.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+i.attr("data-pbid")+'"]'));var r=n;t(this).attr("data-selector")&&(r=n.find(t(this).attr("data-selector"))),i.attr("data-"+a.attr("data-attrname"),t(this).val()),i.attr("data-carousel")&&!i.hasClass("mb2-pb-coursetabs")||i.hasClass("mb2-pb-blog")&&3==i.attr("data-layout")||i.hasClass("mb2-pb-events")&&3==i.attr("data-layout")?e(t(this),i):s(t(this),i,r),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked")),"parallax"===t(this).attr("data-attrname")&&1==t(this).val()?o().parallaxInit(i):"parallax"===t(this).attr("data-attrname")&&0==t(this).val()&&o().parallaxDestroy(i),"graddeg"===t(this).attr("data-attrname")&&i.find(".rowgrad").attr("style","background-image:linear-gradient("+t(this).val()+"deg,"+i.attr("data-gradcolor1")+","+i.attr("data-gradcolor2")+")")})},actionText:function(a,e){a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var i=a;t(this).attr("data-selector")&&(i=a.find(t(this).attr("data-selector")));var n=mb2pb_Helper().stripHtml(t(this).val(),e.attr("data-id"));n=mb2pb_Helper().replaceText(n),""===t(this).val()&&(t(this).attr("data-default")&&(n=t(this).attr("data-default")),t(this).attr("data-globaltext")&&(n=e.closest(mb2pb_Selectors().layout.element).attr("data-"+t(this).attr("data-attrname")))),e.attr("data-"+t(this).attr("data-attrname"),n),i.html(n)})},actionAttribute:function(a,e){"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var i=a;t(this).attr("data-selector")&&(i=a.find(t(this).attr("data-selector")));var n=mb2pb_Helper().stripHtml(t(this).val(),e.attr("data-id"));n=mb2pb_Helper().replaceText(n),""===t(this).val()&&t(this).attr("data-default")&&(n=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),n),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})},actionCallback:function(a,r){var s="change";a.attr("data-changemode")&&(s=a.attr("data-changemode")),"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on(s,function(){"carousel"===t(this).attr("data-callback")?e(t(this),r):"layout-carousel"===t(this).attr("data-callback")?i(t(this),r):"accordion-parent"===t(this).attr("data-callback")?n().accordionParent(t(this),r):"accordion-active"===t(this).attr("data-callback")?n().accordionFirstItem(t(this),r):"typed"===t(this).attr("data-callback")&&l(t(this),r),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})},actionAjax:function(a,e){var i="change";a.attr("data-changemode")&&(i=a.attr("data-changemode")),"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on(i,function(){var i=e.find(".mb2-pb-content-list"),n=e.find(".videowebiframe"),r=e.find(mb2pb_Selectors().layout.carousel);t(this).attr("data-advlayout")?3==t(this).val()?(d().columnsToCarousel(e),d().carouselInit(r.attr("id"))):2==t(this).val()?(r.length&&d().carouselDestroy(r.attr("id")),d().carouselToColumns(a,e)):1==t(this).val()&&(r.length&&d().carouselDestroy(r.attr("id")),d().carouselToColumns(a,e),c().columnsToList(a,e)):"carousel"===t(this).attr("data-attrname")&&1==t(this).val()&&d().carouselPrepare(e),e.attr("data-"+t(this).attr("data-attrname"),t(this).val());var s=mb2pb_Helper().dataAttribs(e);s=jQuery.param(s);var o=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/"+e.attr("data-id")+".php?"+s+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t.ajax({url:o,type:"get",dataType:"html",beforeSend:function(){e.find(".mb2-pb-actions-loading").fadeIn(150)},error:function(t,a,e){},success:function(t){i=e.find(".mb2-pb-content-list"),"coursetabs"===e.attr("data-id")?e.find(".mb2-pb-element-inner").html(t):i.length&&i.html(t),n.length&&n.attr("src",t);var a=e.find(mb2pb_Selectors().layout.carousel);a.length&&(d().carouselDestroy(a.attr("id")),d().carouselInit(a.attr("id"))),setTimeout(function(){e.find(".mb2-pb-actions-loading").fadeOut(150)},350)}}),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})},actionNone:function(a,e){var i="change";a.attr("data-changemode")&&(i=a.attr("data-changemode")),a.on(i,function(){"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})},actionData:function(a,e){a.on("input",function(){e.attr("data-"+t(this).attr("data-attrname"),t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})},actionSetting:function(a,e){var i=e;a.attr("data-parent")&&(i=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]')),a.on("input",function(){e.attr("data-"+t(this).attr("data-attrname"),t(this).val());var a=t(this).closest(mb2pb_Selectors().builder.modalsettings).find('[data-attrname="'+t(this).attr("data-setting")+'"]');i.find(a.attr("data-selector")).css("left","auto"),i.find(a.attr("data-selector")).css("right","auto"),i.find(a.attr("data-selector")).css(t(this).val(),e.attr("data-"+t(this).attr("data-setting"))+a.attr("data-style_suffix")),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})},actionGradient:function(a,e){"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val()),a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var i=a;t(this).attr("data-selector")&&(i=a.find(t(this).attr("data-selector")));var n=t(this).val();""===t(this).val()&&t(this).attr("data-default")&&(n=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),n),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"graddeg"===t(this).attr("data-attrname")&&e.find(".rowgrad").attr("style","background-image:linear-gradient("+t(this).val()+"deg,"+e.attr("data-gradcolor1")+" "+e.attr("data-gradloc1")+"%,"+e.attr("data-gradcolor2")+" "+e.attr("data-gradloc2")+"%)"),"gradloc1"===t(this).attr("data-attrname")&&e.find(".rowgrad").attr("style","background-image:linear-gradient("+e.attr("data-graddeg")+"deg,"+e.attr("data-gradcolor1")+" "+t(this).val()+"%,"+e.attr("data-gradcolor2")+" "+e.attr("data-gradloc2")+"%)"),"gradloc2"===t(this).attr("data-attrname")&&e.find(".rowgrad").attr("style","background-image:linear-gradient("+e.attr("data-graddeg")+"deg,"+e.attr("data-gradcolor1")+" "+e.attr("data-gradloc1")+"%,"+e.attr("data-gradcolor2")+" "+t(this).val()+"%)")})},actionAnimation:function(a,e){a.on("change",function(){e.attr("data-"+t(this).attr("data-attrname"),t(this).val()),e.attr("id")})}}},p=function(){var a=function(a,e){e.find("[data-showon_field2]").each(function(){var e=t(this),i=e.attr("data-showon_field2"),n=e.attr("data-showon_value2").toString().split("|"),r=a.closest(".mb2-pb-element").attr("data-"+i),s=t.inArray(r,n);t('[data-showon_field2="'+i+'"]').closest(".form-group").hide(),-1!=s&&t('[data-showon_field2="'+i+'" ][data-showon_value2*="'+r+'"]').closest(".form-group").show()}),e.find("[data-showon_field]").each(function(){var a,i=t(this),n=i.attr("data-showon_field"),r=i.attr("data-showon_value").toString().split("|"),s=e.find('[data-attrname="'+n+'"]'),o=s.val();"radio"===s.attr("type")&&(o=e.find('[data-attrname="'+n+'"]:checked').val()),t('[data-showon_field="'+n+'"]').closest(".form-group").hide();var l=t.inArray(o,r);-1!=l&&t('[data-showon_field="'+n+'" ][data-showon_value*="'+o+'"]').closest(".form-group").show(),t(document).on("change",'[data-attrname="'+n+'"]',function(){l=t.inArray(t(this).val(),r),t('[data-showon_field="'+n+'"]').closest(".form-group").hide(),-1!=l&&t('[data-showon_field="'+n+'" ][data-showon_value*="'+t(this).val()+'"]').closest(".form-group").show()})})},e=function(t,a){var e=t.attr("data-action");switch(e){case"style":return u().actionStyle(t,a);case"color":return u().actionColor(t,a);case"class":return u().actionClass(t,a);case"text":return u().actionText(t,a);case"attribute":return u().actionAttribute(t,a);case"callback":return u().actionCallback(t,a);case"gradient":return u().actionGradient(t,a);case"ajax":return u().actionAjax(t,a);case"none":return u().actionNone(t,a);case"data":return u().actionData(t,a);case"setting":return u().actionSetting(t,a);case"animation":return u().actionAnimation(t,a)}};return{buildSettings:function(i,n,r){var s=i.closest(".mb2-pb-"+n),o=mb2pb_Helper().uniqId();c().deactivateSections(),s.addClass("mb2-pb-"+n+"-active"),t("#mb2-pb-modal-settings-"+n).find(".mb2-pb-modal-body").empty();var l=t("#tab-settings-"+n+r).clone(!0),d=t("#mb2-pb-modal-settings-"+n).find(".mb2-pb-modal-body").append(l);d.find(".mb2-pb-tabs-link").each(function(){t(this).attr("aria-controls",t(this).attr("aria-controls")+"_modal")}),d.find(".mb2-pb-tabs-pane").each(function(){t(this).attr("id",t(this).attr("id")+"_modal")}),d.find(".mb2-pb-radio-el").each(function(){var a=t(this).attr("data-valid")+"_"+o;t(this).find("input").attr("id",a),t(this).find("label").attr("for",a)});var u=d.find(".mb2-pb-editor");u.length>0&&(t(".mb2-pb-editor").removeClass("mb2-pb-active-editor"),t(".mb2-pb-editor-document").removeAttr("contenteditable"),t(".mb2-pb-editor-document").removeClass("mb2-pb-editor-document-active"),t(".mb2-pb-editor-document").attr("id","mb2-pb-editor-document-active"),u.addClass("mb2-pb-active-editor"),d.find(".mb2-pb-editor-document").attr("contenteditable","true"),d.find(".mb2-pb-editor-document").addClass("mb2-pb-editor-document-active"),d.find(".mb2-pb-editor-document").removeAttr("id")),d.find(".mb2-pb-input").each(function(){var a=t(this),i=s.attr("data-"+a.attr("data-attrname"));if(void 0!==(i=mb2pb_Helper().decodeSpecialHtml(i))&&("radio"===a.attr("type")?(a.prop("checked",!1),a.attr("value")==i&&(a.closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),a.prop("checked",!0),a.closest(".mb2-pb-radio-el").addClass("checked"))):a.val(i)),a.hasClass("mb2-pb-editor-input")&&m().initEditor(i,a,s),a.hasClass("mb2-pb-input-type-icon")){var n=i||a.val();n&&(a.closest(".mb2-pb-form-group").find("i").attr("class",n),a.closest(".mb2-pb-form-group").find("i").show())}if(a.hasClass("mb2-pb-input-type-image")){var n=i||a.val();n&&(a.closest(".mb2-pb-form-group").removeClass("isvideo"),2==mb2pb_Helper().checkImage(n)&&a.closest(".mb2-pb-form-group").addClass("isvideo"),a.closest(".mb2-pb-form-group").find("img").attr("src",n),a.closest(".mb2-pb-form-group").find("img").show())}e(a,s)});var p=t(".mb2-pb-"+n+"-active").attr("data-elname");t("#mb2-pb-modal-settings-"+n).find(".modal-title").text(p),a(s,d)},saveSettings:function(a){t("#mb2-pb-modal-settings-"+a).find(".mb2-pb-input").each(function(){var e=t(this),i=t(".mb2-pb-"+a+"-active"),n=e.attr("data-attrname"),r=e.val();if(e.hasClass("mb2-pb-editor-input")&&(m().updateFromTextareaBeforeSave(),r=m().getCleanHtml()),"text"===e.attr("data-action")&&(r=mb2pb_Helper().stripHtml(r,i.attr("data-id")),r=mb2pb_Helper().replaceText(r)),"radio"===e.attr("type")?e.is(":checked")&&i.attr("data-"+n,r):i.attr("data-"+n,r),"sectionaccess"===n||"rowaccess"===n){var s="";1==r?s='<i class="fa fa-lock"></i>':2==r&&(s='<i class="fa fa-unlock"></i>'),i.find(">div>.mb2-pb-access").html(s)}n===a+"hidden"&&(1==r?i.addClass("hiddenel"):i.removeClass("hiddenel"))}),c().deactivateSections()},canSave:function(a){return t(mb2pb_Selectors().layout.element+"-active").length&&t(mb2pb_Selectors().layout.element+"-active").hasClass("mb2pb-html")?mb2pb_Helper().validHtml(a.find(".mb2-pb-input-content").val()):1}}},b=function(){return{customLayout:function(a){var e=a,i=t('[name="importlayoutkeep"]');if(0==t("#importlayoutid").val())return t("#importlayoutid").css("border-color","red"),t("#importlayoutid").closest("div").find(".mb2-pb-error").show(),null;t("#importlayoutid").attr("style",""),t("#importlayoutid").closest("div").find(".mb2-pb-error").hide(),mb2pb_Helper().overlay(!0);var r=a.find(".btn");r.val(langspan.data("processing")),r.attr("disabled","disabled");var m=a.attr("data-url");t.ajax({type:"POST",url:m,data:a.serialize(),dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(a){t("#importlayoutid").val(0),i.prop("checked")?t(mb2pb_Selectors().builder.buildercontainer).first().find(mb2pb_Selectors().layout.container_sections).append(a):t(mb2pb_Selectors().builder.buildercontainer).first().find(mb2pb_Selectors().layout.container_sections).html(a),mb2pb_Helper().overlay(!1),c().layoutInit(),l().saveDemo(),t(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().layout.carousel).each(function(){d().carouselInit(t(this).attr("id"))}),t(mb2pb_Selectors().builder.buildercontainer).find(".parallax1").each(function(){o().parallaxInit(t(this))}),t(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().elements.animnum).each(function(){n().animnumInit(t(this),!1)}),t(mb2pb_Selectors().builder.buildercontainer).find(".accimg-item.show").each(function(){s().itemAttrs(t(this))}),n().initDynamicElements(),v().loadCourses(),setTimeout(function(){r.removeAttr("disabled"),r.val(langspan.data("importlayoutbtn")),e.find(".mb2-pb-success").show(),setTimeout(function(){e.find(".mb2-pb-success").hide()},1e4)},600)}})},predefinedPart:function(a){var e=a.attr("data-part"),i=mb2pb_Helper().dataAttribs(a);i=jQuery.param(i);var r=t(mb2pb_Selectors().settings.settings).data("baseurl")+"/local/mb2builder/ajax/import-blocks.php?"+i+"&sesskey="+t(mb2pb_Selectors().settings.settings).attr("data-sesskey");mb2pb_Helper().overlay(!0),t.ajax({url:r,type:"get",dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(i){if("layouts"===e){let r=t(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().layout.container_sections);mb2pb_Helper().stripHtml(i,"")!==i?r.html(i):console.log(i);let m=a.closest(".mb2-pb-uploadbackup-restore");m.length&&(m.find(".file-info").empty(),a.addClass("d-none"))}else{var u=t(mb2pb_Selectors().layout.section).first().find(mb2pb_Selectors().layout.container_rows);u.append(i);var p=u.find(t(mb2pb_Selectors().layout.startbuttons));p.length&&p.remove()}mb2pb_Helper().overlay(!1),c().layoutInit(),l().saveDemo(),t(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().layout.carousel).each(function(){d().carouselInit(t(this).attr("id"))}),t(mb2pb_Selectors().builder.buildercontainer).find(".parallax1").each(function(){o().parallaxInit(t(this))}),t(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().elements.animnum).each(function(){n().animnumInit(t(this),!1)}),t(mb2pb_Selectors().builder.buildercontainer).find(".accimg-item.show").each(function(){s().itemAttrs(t(this))}),n().initDynamicElements(),v().loadCourses()}})}}},f=function(){return{iconAction:function(a,e,i){var n=mb2pb_Helper().getSection(i),r=n;(e.attr("data-selector")&&(r=n.find(e.attr("data-selector"))),n.hasClass("mb2pb-button")&&r.closest(".btn-incon").removeClass("hidden"),n.attr("data-"+e.attr("data-attrname"),a),e.attr("data-globalparent"))?n.find(mb2pb_Selectors().layout.subelement).each(function(){t(this).attr("data-"+e.attr("data-attrname"))||t(this).find(r).attr("class",a)}):r.attr("class",a)},iconRemoveAction:function(a,e){var i=mb2pb_Helper().getSection(e),n=i;(a.attr("data-selector")&&(n=i.find(a.attr("data-selector"))),i.hasClass("mb2pb-button")&&n.closest(".btn-incon").addClass("hidden"),a.attr("data-default")&&!a.attr("data-globalparent")&&i.attr("data-"+a.attr("data-attrname"),a.attr("data-default")),a.attr("data-default")&&a.attr("data-globalparent"))?(i.find(mb2pb_Selectors().layout.subelement).each(function(){t(this).attr("data-"+a.attr("data-attrname"))||t(this).find(n).attr("class",a.attr("data-default"))}),i.attr("data-"+a.attr("data-attrname"),a.attr("data-default"))):a.attr("data-globalchild")?(i.attr("data-"+a.attr("data-attrname"),""),n.attr("class",i.closest(mb2pb_Selectors().layout.element).attr("data-"+a.attr("data-attrname")))):a.attr("data-default")?n.attr("class",a.attr("data-default")):(i.attr("data-"+a.attr("data-attrname"),""),n.attr("class","hidden"))}}},h=function(){var a=function(){var t="";return t+='<div class="filepicker-container">',t+='<div class="dndupload-message">You can drag and drop files here to add them. <br>',t+='<div class="dndupload-arrow d-flex"><i class="fa fa-arrow-circle-o-down fa-3x m-auto"></i></div>',t+="</div>",t+="</div>",t+='<div class="dndupload-progressbars"></div>'};return{imageAction:function(t,a,e){var i=mb2pb_Helper().getSection(e),n=i;a.attr("data-parent")&&(n=i.closest(mb2pb_Selectors().layout.element).find('.mb2-pb-carousel-item[data-pbid="'+i.attr("data-pbid")+'"]'));var r=n;if(a.attr("data-selector")&&(r=n.find(a.attr("data-selector"))),"background-image"===a.attr("data-style_properity"))r.css("background-image","url('"+t+"')");else{if("videofile"===a.attr("data-attrname")){var s='<video controls="true"><source src="'+t+'"></video>';r.parent().find(".videolocal-placeholder").hide(),r.html(s)}else if("bgvideo"===a.attr("data-attrname")){var s='<video autoplay muted loop><source src="'+t+'"></video>';r.html(s)}else if("heroimgurl"===a.attr("data-attrname")&&2==mb2pb_Helper().checkImage(t)){r.hide(),r.parent().find("video").remove();var s='<video class="hero-video" autoplay muted loop><source src="'+t+'"></video>';r.parent().prepend(s)}else r.parent().find("video").remove(),r.show(),r.attr("src",t),r.hasClass("accimg-image-src")&&i.closest(mb2pb_Selectors().layout.element).find(".accimg-img-preview img").attr("src",t);a.attr("data-selectorbg")&&n.find(a.attr("data-selectorbg")).css("background-image","url('"+t+"')"),a.attr("data-parent")&&(i.find(a.attr("data-selector")).attr("src",t),i.css("background-image","url('"+t+"')"))}},imageRemoveAction:function(t,a){var e=mb2pb_Helper().getSection(a),i=e;t.attr("data-parent")&&(i=e.closest(mb2pb_Selectors().layout.element).find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var n=i;t.attr("data-selector")&&(n=i.find(t.attr("data-selector"))),"background-image"===t.attr("data-style_properity")?n.css(t.attr("data-style_properity"),"none"):"videofile"===t.attr("data-attrname")?(n.html(""),n.parent().find(".videolocal-placeholder").show()):"bgvideo"===t.attr("data-attrname")?n.html(""):"heroimgurl"===t.attr("data-attrname")?(n.attr("src",""),n.parent().find("video").remove()):(n.attr("src",""),t.attr("data-selectorbg")&&i.find(t.attr("data-selectorbg")).css("background-image","none"))},applyFileManager:function(e){window.onbeforeunload=null;let i=0,n=0,r=e.closest("#mb2-pb-modal-globalfile-manager").length?1:0,s=e.closest("#mb2-pb-modal-backupfile-manager").length?1:0,o=e.closest("#mb2-pb-modal-file-manager");r?o=e.closest("#mb2-pb-modal-globalfile-manager"):s&&(o=e.closest("#mb2-pb-modal-backupfile-manager")),s||(n=(i=r?t("#mb2-pb-modal-global-images"):t("#mb2-pb-modal-images")).find(".mb2-pb-overlay"));let l=o.find('[data-fieldtype="filepicker"]'),d=o.find("form"),c=o.find(".mb2-pb-uploadmedia-wrap").attr("data-url");if(s&&(c=o.find(".mb2-pb-uploadbackup-wrap").attr("data-url")),!l.find(".filepicker-filename>a").length)return null;0!=n&&n.fadeIn(180),mb2pb_Helper().modalHelper().mb2pb_modalHide(e),l.find(".filepicker-filename").html(a()),t.ajax({type:"POST",url:c,dataType:"html",data:d.serialize(),beforeSend:function(){},error:function(t,a,e){},success:function(a){s&&(obj=JSON.parse(a),t(".restore-backup-trigger").attr("data-upload",obj.itemid),t(".restore-backup-trigger").click()),0!=i&&(i.find(".mb2-pb-images").html(a),i.find(".mb2-pb-search-image").val(""),i.find(".mb2-pb-search-image").trigger("keyup")),0!=n&&setTimeout(function(){n.fadeOut(250)},450)}})},removeFileManager:function(a){var e=(a.closest("#mb2-pb-modal-global-images").length?1:0)?t("#mb2-pb-modal-global-images"):t("#mb2-pb-modal-images"),i=e.find(".mb2-pb-overlay"),n=a.closest(".mb2-pb-images"),r=mb2pb_Helper().dataAttribs(a);r=jQuery.param(r);var s=n.attr("data-url")+"?"+r+"&sesskey="+t(mb2pb_Selectors().settings.settings).attr("data-sesskey");i.fadeIn(180),t.ajax({url:s,type:"get",dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(t){n.html(t),e.find(".mb2-pb-search-image").val(""),e.find(".mb2-pb-search-image").trigger("keyup"),setTimeout(function(){i.fadeOut(250)},450)}})}}},v=function(){var e=function(a){var e=a.closest(".mb2-pb-coursetabs"),i=mb2pb_Helper().dataAttribs(e);i=jQuery.param(i);var n=t(mb2pb_Selectors().settings.settings).attr("data-themeurl")+"/lib/lib_ajax_coursetabs.php?"+i+"&categories="+a.attr("data-category")+"&sesskey="+t(mb2pb_Selectors().settings.settings).attr("data-sesskey");t(".mb2-pb-coursetabs").removeClass("coursetabs-active"),e.addClass("coursetabs-active");var r=t(".coursetabs-active #"+a.attr("data-uniqid")+"_category-content-"+a.attr("data-category"));if(t(".coursetabs-active .coursetabs-catitem").removeClass("active"),a.addClass("active"),t(".coursetabs-active .coursetabs-content").removeClass("active"),r.addClass("active"),r.hasClass("fillin"))return null;r.addClass("loading"),t.ajax({url:n,type:"get",dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(t){var a=r;a.html(t);var e=a.find(".swiper");e.length&&d().carouselInit(e.attr("id")),a.addClass("fillin"),a.removeClass("loading")}})},i=function(){t(".mb2-pb-container .coursetabs-catitem.active").each(function(){e(t(this))})};return{init:function(){i(),a.on("click",".coursetabs-catitem",function(){e(t(this))})},getCourses:e,loadCourses:i}};({init:function(){c().layoutInit(),mb2pb_Helper().modalSettings(),e(),i(),({initActions:function(){a.on("click",mb2pb_Selectors().builder.modalbtn,function(a){a.preventDefault(),mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-target"))}),a.on("click",mb2pb_Selectors().builder.modalclose,function(a){a.preventDefault(),mb2pb_Helper().modalHelper().mb2pb_modalHide(t(this))}),a.on("click",mb2pb_Selectors().builder.addelement,function(a){a.preventDefault(),mb2pb_Helper().checkModal(a)&&(mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal")),t(mb2pb_Selectors().layout.pbcolumn).removeClass("mb2-pb-column-active"),t(this).closest(mb2pb_Selectors().layout.pbcolumn).addClass("mb2-pb-column-active"))}),a.on("click",mb2pb_Selectors().builder.insertelement,function(a){a.preventDefault();var e=t(this).data("id"),i=t(this).data("subelement"),r=t(this).data("subelement_name"),o=c().elementHtml(e,i,r);t(mb2pb_Selectors().builder.activecolumn).find(mb2pb_Selectors().layout.elementcontainer).append(o);var m=o.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carousel);m.length&&d().carouselInit(m.attr("id"));var u=o.closest(mb2pb_Selectors().layout.element).find(".accimg-item.show");u.length&&s().itemAttrs(u),"coursetabs"===e&&v().getCourses(o.find(".coursetabs-catitem.active")),n().loadItems(o.closest(mb2pb_Selectors().layout.element)),c().deactivateSections(),c().layoutInit(),l().saveDemo()}),a.on("click",mb2pb_Selectors().toolbar.remove,function(a){a.preventDefault(),confirm(langspan.data("remove")+": "+t(this).closest(mb2pb_Selectors().layout.element).attr("data-elname")+"?")&&(t(this).closest(mb2pb_Selectors().layout.element).remove(),d().carouselRowClass(),l().saveDemo())}),a.on("click",mb2pb_Selectors().toolbar.remove_row,function(a){if(a.preventDefault(),confirm(langspan.data("remove")+": "+t(this).closest(mb2pb_Selectors().layout.row).attr("data-elname")+"?")){var e=t(this).closest(mb2pb_Selectors().layout.container_rows);t(this).closest(mb2pb_Selectors().layout.row).remove(),""===e.html()&&e.html(c().startButtonsHtml()),l().saveDemo()}}),a.on("click",mb2pb_Selectors().toolbar.remove_section,function(a){if(a.preventDefault(),1==t(this).closest(mb2pb_Selectors().builder.buildercontainer).find(mb2pb_Selectors().layout.section).length){alert(langspan.data("cannotremove"));return}confirm(langspan.data("remove")+": "+t(this).closest(mb2pb_Selectors().layout.section).attr("data-elname")+"?")&&(t(this).closest(mb2pb_Selectors().layout.section).remove(),l().saveDemo())}),a.on("click",mb2pb_Selectors().toolbar.remove_subelement,function(a){if(a.preventDefault(),1==t(this).closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.subelement).length){alert(langspan.data("cannotremove"));return}if(confirm(langspan.data("remove")+": "+t(this).closest(mb2pb_Selectors().layout.subelement).attr("data-elname")+"?")){var e=t(this).closest(mb2pb_Selectors().layout.subelement);if(e.hasClass("mb2-pb-carousel_item")){var i=e.closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.carousel);d().carouselDestroy(i.attr("id")),e.closest(mb2pb_Selectors().layout.element).find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]').remove(),d().carouselInit(i.attr("id"))}e.remove(),l().saveDemo()}}),a.on("click",mb2pb_Selectors().builder.togglewindowsize,function(){var a=t(this).closest(mb2pb_Selectors().builder.modalsettings);a.hasClass("mb2-pb-modal-wider")?a.removeClass("mb2-pb-modal-wider"):a.addClass("mb2-pb-modal-wider")}),a.on("click",mb2pb_Selectors().settings.settingselement,function(a){if(a.preventDefault(),mb2pb_Helper().checkModal(a)){mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal"));var e=t(this).closest(mb2pb_Selectors().layout.element).data("id");p().buildSettings(t(this),"element","-"+e)}}),a.on("click",mb2pb_Selectors().settings.settingssubelement,function(a){a.preventDefault();var e=mb2pb_Helper().checkModal(a),i=t(this).closest(mb2pb_Selectors().layout.subelement);if(e){mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal"));var r=t(this).closest(mb2pb_Selectors().layout.element).data("id");if(t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-tabs_item")){var o=t(this).closest(".theme-tabs").find(".nav-link"),l=t(this).closest(mb2pb_Selectors().layout.subelement).find(".nav-link");n().tabsActivateItem(o,l)}else t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-accordionimg_item")?s().accItemOpen(i.find(".accimg-item")):t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-accordion_item")&&!t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("accimg-item")&&n().accordionActivateItem(i);p().buildSettings(t(this),"subelement","-"+r)}}),a.on("click",mb2pb_Selectors().settings.settingsection,function(a){a.preventDefault(),mb2pb_Helper().checkModal(a)&&(mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal")),p().buildSettings(t(this),"section",""))}),a.on("click",mb2pb_Selectors().settings.sectionup,function(){let a=t(this).closest(mb2pb_Selectors().layout.section),e=a.prev();e.length&&(a.insertBefore(e),d().carouselRowClass(),l().saveDemo())}),a.on("click",mb2pb_Selectors().settings.sectiondown,function(){let a=t(this).closest(mb2pb_Selectors().layout.section),e=a.next();e.length&&(a.insertAfter(e),d().carouselRowClass(),l().saveDemo())}),a.on("click",mb2pb_Selectors().settings.rowup,function(){let a=t(this).closest(mb2pb_Selectors().layout.row),e=a.prev();e.length&&(a.insertBefore(e),d().carouselRowClass(),l().saveDemo())}),a.on("click",mb2pb_Selectors().settings.rowdown,function(){let a=t(this).closest(mb2pb_Selectors().layout.row),e=a.next();e.length&&(a.insertAfter(e),d().carouselRowClass(),l().saveDemo())}),a.on("click",mb2pb_Selectors().settings.settingsrow,function(a){a.preventDefault(),mb2pb_Helper().checkModal(a)&&(mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal")),p().buildSettings(t(this),"row",""))}),a.on("click",mb2pb_Selectors().settings.settingscolumn,function(a){a.preventDefault(),mb2pb_Helper().checkModal(a)&&(mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal")),p().buildSettings(t(this),"column",""))}),a.on("click",mb2pb_Selectors().settings.rowtoggle+","+mb2pb_Selectors().settings.layoutrow,function(a){if(a.preventDefault(),mb2pb_Helper().checkModal(a)){mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal")),c().deactivateSections(),t(this).closest(mb2pb_Selectors().layout.section).addClass("mb2-pb-section-active");var e=t(mb2pb_Selectors().builder.modallayouts).find(mb2pb_Selectors().builder.modallayout_variant);if(e.removeClass("update"),e.removeClass("current-layout"),t(this).hasClass("layout-row")){t(mb2pb_Selectors().layout.row).removeClass("mb2-pb-row-active"),t(this).closest(mb2pb_Selectors().layout.row).addClass("mb2-pb-row-active"),e.addClass("update");var i=c().currentColumns(t(this));c().rowCurrentClass(i,e)}}}),a.on("click",mb2pb_Selectors().builder.modallayout_variant,function(a){a.preventDefault();var e=t(this).data("row_variant"),i=c().rowHtml(e),n=t(mb2pb_Selectors().layout.section+"-active").find(mb2pb_Selectors().layout.container_rows),r=n.find(t(mb2pb_Selectors().layout.startbuttons));if(!t(this).hasClass("current-layout")){if(t(this).hasClass("update")){var s=(n=t(mb2pb_Selectors().layout.row+"-active").find(mb2pb_Selectors().layout.sortable_columns)).find(mb2pb_Selectors().layout.carousel);s.length&&d().carouselDestroy(s.attr("id")),i=c().buildRowColumns(e),n.empty()}r.length&&r.remove(),n.append(i);var o=n.find(mb2pb_Selectors().layout.carousel);o.length&&d().carouselInit(o.attr("id")),c().deactivateSections(),c().layoutInit(),l().saveDemo(),mb2pb_Helper().modalHelper().mb2pb_modalHide(t(this))}}),a.on("click",mb2pb_Selectors().toolbar.duplicate_row,function(a){a.preventDefault();var e=t(this).closest(mb2pb_Selectors().layout.row),i=e.clone();e.after(i),n().runElements(i),c().layoutInit(),l().saveDemo()}),a.on("click",mb2pb_Selectors().toolbar.duplicate_section,function(a){a.preventDefault();var e=t(this).closest(mb2pb_Selectors().layout.section).clone();t(this).closest(mb2pb_Selectors().layout.container_sections).append(e),n().runElements(e),c().layoutInit(),l().saveDemo()}),a.on("click",mb2pb_Selectors().toolbar.duplicate_element,function(a){a.preventDefault();var e=t(this).closest(mb2pb_Selectors().layout.element),i=e.clone();e.after(i),n().runElements(i),c().layoutInit(),l().saveDemo()}),a.on("click",mb2pb_Selectors().toolbar.duplicate_subelement,function(a){a.preventDefault();var e=t(this).closest(mb2pb_Selectors().layout.subelement).clone();if(t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-accordion_item")){var i="accordion_item"+mb2pb_Helper().uniqId();e.find('[data-toggle="collapse"]').attr("data-target","#"+i),e.find('[data-toggle="collapse"]').attr("aria-controls",i),e.find(".collapse").removeClass("show"),e.find(".collapse").attr("id",i)}t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-tabs_item")&&n().tabsDuplicateItem(t(this),e),t(this).closest(mb2pb_Selectors().layout.subelement).hasClass("mb2-pb-carousel_item")&&d().carouselDuplicateItem(t(this),e),t(this).closest(mb2pb_Selectors().layout.container_subelements).append(e),c().layoutInit(),l().saveDemo()}),a.on("click",mb2pb_Selectors().settings.save_element+","+mb2pb_Selectors().settings.save_subelement+","+mb2pb_Selectors().settings.save_section+","+mb2pb_Selectors().settings.save_row+","+mb2pb_Selectors().settings.save_column,function(a){var e=t(this).closest(mb2pb_Selectors().builder.modalsettings),i=e.attr("data-type");if(p().canSave(e)){switch(i){case"settings-section":p().saveSettings("section");break;case"settings-row":p().saveSettings("row");break;case"settings-element":p().saveSettings("element");break;case"settings-column":p().saveSettings("column");break;case"settings-subelement":p().saveSettings("subelement")}l().saveDemo(),mb2pb_Helper().modalHelper().mb2pb_modalHide(t(this))}}),a.on("click",mb2pb_Selectors().settings.image_add,function(a){a.preventDefault(),t('input[name="mb2_pb_input_image_url"]').removeClass("mb2_pb_input_image_url_active"),t(this).closest(mb2pb_Selectors().settings.form_group).find('input[name="mb2_pb_input_image_url"]').addClass("mb2_pb_input_image_url_active"),t(".mb2-pb-search-image").val(""),t(".mb2-pb-search-image").trigger("keyup")}),a.on("click",mb2pb_Selectors().settings.image_insert,function(a){a.preventDefault();var e=t(mb2pb_Selectors().layout.row+"-active"),i=e.hasClass("parallax1");i&&o().parallaxDestroy(e);var n=t(this).data("imgurl"),r=t(mb2pb_Selectors().settings.image_activeinput);r.val(n),r.closest(mb2pb_Selectors().settings.form_group).removeClass("isvideo"),2==mb2pb_Helper().checkImage(n)&&r.closest(mb2pb_Selectors().settings.form_group).addClass("isvideo");var s=r.closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().settings.image_preview);s.show(),s.attr("src",n);var l=r.closest(mb2pb_Selectors().builder.modalsettings).data("type");h().imageAction(n,r,l),i&&o().parallaxInit(e)}),a.on("click",mb2pb_Selectors().settings.image_remove,function(a){a.preventDefault();var e=t(mb2pb_Selectors().layout.row+"-active");e.hasClass("parallax1")&&o().parallaxDestroy(e),t(this).closest(mb2pb_Selectors().settings.form_group).removeClass("isvideo");var i=t(this).closest(mb2pb_Selectors().settings.form_group).find('input[name="mb2_pb_input_image_url"]');i.val("");var n=t(this).closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().settings.image_preview);n.hide(),n.attr("src","");var r=i.closest(mb2pb_Selectors().builder.modalsettings).data("type");h().imageRemoveAction(i,r)}),t(mb2pb_Selectors().builder.search_image).each(function(){t(this).on("keyup",function(){var a=t(this).val().toLowerCase();t(this).closest(".mb2-pb-modal-body").find(mb2pb_Selectors().settings.image_insert).each(function(){t(this).filter('[data-imgname*="'+a+'"]').length>0||0==a.length?t(this).closest(mb2pb_Selectors().settings.image_toinsert).show():t(this).closest(mb2pb_Selectors().settings.image_toinsert).hide()})})}),a.on("click",mb2pb_Selectors().settings.media_apply,function(){h().applyFileManager(t(this))}),a.on("click",mb2pb_Selectors().settings.media_remove,function(){h().removeFileManager(t(this))}),a.on("click",mb2pb_Selectors().builder.restorefilebtn,function(){h().applyFileManager(t(this))}),a.on("click",mb2pb_Selectors().settings.icon_select,function(a){t(mb2pb_Selectors().settings.icon_input).removeClass("active"),t(this).closest(mb2pb_Selectors().settings.form_group).find(mb2pb_Selectors().settings.icon_input).addClass("active")}),a.on("click",mb2pb_Selectors().settings.icon_choose,function(){var a=t(this).data("iconname"),e=t(mb2pb_Selectors().settings.icon_input+".active"),i=e.closest(mb2pb_Selectors().builder.modalsettings).data("type");e.val(a),t(mb2pb_Selectors().settings.icon_input+".active").closest(mb2pb_Selectors().settings.form_group).find("i").show(),t(mb2pb_Selectors().settings.icon_input+".active").closest(mb2pb_Selectors().settings.form_group).find("i").attr("class",a),t(mb2pb_Selectors().builder.search_icon).val(""),t(mb2pb_Selectors().builder.search_icon).trigger("keyup"),f().iconAction(a,e,i)}),a.on("click",mb2pb_Selectors().settings.icon_remove,function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-form-group").find(".mb2-pb-input-type-icon");e.attr("data-default")?(e.val(e.attr("data-default")),t(this).closest(mb2pb_Selectors().settings.form_group).find("i").attr("class",e.attr("data-default"))):(e.val(""),t(this).closest(mb2pb_Selectors().settings.form_group).find("i").attr("class",""),t(this).closest(mb2pb_Selectors().settings.form_group).find("i").hide());var i=e.closest(mb2pb_Selectors().builder.modalsettings).data("type");f().iconRemoveAction(e,i)}),a.on("keyup",mb2pb_Selectors().builder.search_icon,function(){var a=t(this).val().toLowerCase();t(this).closest(".mb2-pb-tabs-pane").find(mb2pb_Selectors().settings.icon_choose).each(function(){t(this).filter('[data-iconname*="'+a+'"]').length>0||0==a.length?t(this).show():t(this).hide()})}),a.on("click",mb2pb_Selectors().builder.importexportbtn,function(a){mb2pb_Helper().checkModal(a)&&mb2pb_Helper().modalHelper().mb2pb_modalShow(t(this).attr("data-modal"))}),a.on("submit",mb2pb_Selectors().builder.form_savelayout,function(a){a.preventDefault(),({savelayout:function(a){var e=a;if(!t("#savelayoutname").val()&&0==t("#editlayoutid").val())return t("#savelayoutname").css("border-color","red"),t("#savelayoutname").closest("div").find(".mb2-pb-error").show(),null;t("#savelayoutname").attr("style",""),t("#savelayoutname").closest("div").find(".mb2-pb-error").hide();var i=a.find(".btn");i.val(langspan.data("processing")),i.attr("disabled","disabled");var n=a.attr("data-url"),r=JSON.stringify(mb2pb_LayoutData().setData(!1));t("#savelayoutcontent").val(r),t.ajax({type:"POST",url:n,data:a.serialize(),beforeSend:function(){},error:function(t,a,e){t.status,t.statusText},success:function(a){setTimeout(function(){i.removeAttr("disabled"),i.val(langspan.data("selectlayout")),t("#savelayoutname").val(""),t("#editlayoutid").val(0),e.find(".mb2-pb-success").show(),setTimeout(function(){e.find(".mb2-pb-success").hide()},1e4)},600)}})}}).savelayout(t(this))}),a.on("submit",mb2pb_Selectors().builder.form_importlayout,function(a){a.preventDefault(),b().customLayout(t(this))}),a.on("click",mb2pb_Selectors().builder.import_partbtn,function(a){a.preventDefault(),b().predefinedPart(t(this))}),a.on("click",mb2pb_Selectors().builder.restorebtn,function(a){confirm(langspan.attr("data-confirmreplacecontent"))&&b().predefinedPart(t(this))}),a.on("click",mb2pb_Selectors().elements.animnum_runbtn,function(a){a.preventDefault();var e=t(mb2pb_Selectors().elements.animnum+""+mb2pb_Selectors().layout.element+"-active");e.find(mb2pb_Selectors().elements.animnum_item_number).text("0"),n().animnumInit(e,!0)}),a.on("click",mb2pb_Selectors().elements.heading_type_refresh,function(a){var e=t(mb2pb_Selectors().elements.heading+""+mb2pb_Selectors().layout.element+"-active").find(".heading").attr("id");r().beforeTypedInit(e),r().typedInit(e)}),a.on("click",mb2pb_Selectors().settings.cancel+","+mb2pb_Selectors().builder.modalsettings+" .close",function(a){mb2pb_Helper().modalHelper().mb2pb_modalHide(t(this)),mb2pb_Helper().reload()}),a.on("click",mb2pb_Selectors().builder.modalsettingselements+" .close",function(t){c().deactivateSections()}),a.on("click",mb2pb_Selectors().builder.editor_active+" button",function(a){a.preventDefault(),m().buttonActions(t(this))}),a.on("change",mb2pb_Selectors().builder.editor_active+' select[data-action="formatBlock"]',function(a){m().formatBlock(t(this))}),a.on("click",mb2pb_Selectors().builder.editor_active+" .mbp-pb-editor-htmlmode",function(a){m().toggleMode(t(this))}),a.on("click",mb2pb_Selectors().builder.editor_active+" "+mb2pb_Selectors().toolbar.editor_image,function(a){m().toggleHelper(t(this))}),a.on("click",mb2pb_Selectors().builder.editor_document+" a",function(a){t(mb2pb_Selectors().builder.editor_document).find("a").removeClass("active"),t(this).addClass("active")}),a.on("click",mb2pb_Selectors().builder.editor_active+" "+mb2pb_Selectors().toolbar.editor_link,function(a){m().toggleHelper(t(this)),m().setLinkForm(t(this))}),a.on("click",mb2pb_Selectors().settings.editor_link_save,function(a){m().linkSave(t(this))}),a.on("click",mb2pb_Selectors().settings.editor_link_cancel,function(a){m().linkCancel(t(this))}),a.on("click",mb2pb_Selectors().settings.editor_image_save,function(a){m().imageSave(t(this))}),a.on("click",mb2pb_Selectors().builder.editor_document+" img",function(a){m().imageActive(t(this))}),a.on("click",mb2pb_Selectors().settings.editor_image_remove,function(a){m().imageRemove(t(this))}),a.on("click",mb2pb_Selectors().settings.editor_image_cancel,function(a){m().imageCancel(t(this))}),a.on("submit",mb2pb_Selectors().elements.login+" form,"+mb2pb_Selectors().elements.search+" form",function(t){t.preventDefault()}),a.on("click",mb2pb_Selectors().toolbar.items+",.mb2-pb-select-btn",function(a){a.preventDefault(),t(this).closest(mb2pb_Selectors().layout.element).find(mb2pb_Selectors().layout.container_subelements).slideToggle(250)}),a.on("click",mb2pb_Selectors().builder.preventclick,function(t){t.preventDefault()}),a.on("click",mb2pb_Selectors().builder.collapsedgroup_header,function(a){var e=t(this).closest(mb2pb_Selectors().builder.collapsedgroup);e.find(mb2pb_Selectors().builder.collapsedgroup_content),e.hasClass("open")?e.removeClass("open"):(t(mb2pb_Selectors().builder.collapsedgroup).removeClass("open"),e.addClass("open"))})}}).initActions(),v().init(),d().carouselInit(!1),o().parallaxInit(!1),n().animnumInit(!1,!1),r().typedInit(!1),({newsTickerInit:function(){t(".mb2-pb-announcements").each(function(){})}}).newsTickerInit(),n().initDynamicElements(),s().init(),l().setDemoContent(),mb2pb_Helper().overlay(!1)}}).init()}),mb2pb_Helper().wfSortable();